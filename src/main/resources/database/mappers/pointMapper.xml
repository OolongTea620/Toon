
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
    <mapper namespace="com.to.t1.point.PointMapper">
	
	<!-- 포인트 "충전"내역 조회하기(키는 username, List)-->
	<select id="getMyChargeList" parameterType="MemberVO" resultType="PointVO">
		SELECT * FROM USER03.Point WHERE  username = #{username}
	</select>
	<!-- 포인트 "사용"내역 조회하기(키는 username, List)-->
	<select id="getMyUseList" parameterType="MemberVO" resultType="PointVO">
		SELECT * FROM USER03.Point WHERE  username = #{username}
	</select>
	
	
	<!-- 포인트 충전하기 (멤버 업데이트) -->
	<update id="setChargePoint" parameterType="PointVO">
		UPDATE member SET point =(member.point + #{point}) 
		WHERE username =#{username}
	</update>
	
	<!-- 포인트 내역 작성하기 -->
	<insert id="setPointList" parameterType="PointVO">
		INSERT INTO `user03`.`point` (`username`, `point`, `cDate`, `contents`) 
		VALUES (#{username}, #{point}, NOW(),#{contents} );
	</insert>
	
	<select id="getTicketStock" parameterType="TicketBoxVO" resultType="TicketBoxVO">
		SELECT * FROM USER03.chargePoint 
		WHERE  username = #{username}
	</select>
	
	<!-- 소장권 구매- 포인트 사용하기-->
	<update id="setUsePoint" parameterType="PointVO">
		UPDATE member SET point = (member.point - #{point}) 
		WHERE  username =#{username}
	</update>
	<!-- 소장권 TicketBOX 넣기 혹은 꺼내기-->
	
	<!-- useTicket 내역 작성하기 -->
	
	<!-- 소장권 돌려주기 (소장권 -> point 전환하기)  -->
	
	
   </mapper>