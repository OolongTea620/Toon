--toon 작품
CREATE TABLE `toon` (
	`toonNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`toonTitle` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`genre` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`WriterID` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`toonSum` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`hit` BIGINT(20) UNSIGNED NULL DEFAULT '0',
	`toonDay` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`state` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`titleImg` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`ratingSum` BIGINT(20) UNSIGNED NULL DEFAULT '0',
	`ratingPerson` BIGINT(20) UNSIGNED NULL DEFAULT '0',
	PRIMARY KEY (`toonNum`) USING BTREE
)

--member 회원
CREATE TABLE `member` (
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`password` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`name` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`nickname` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`phone` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`email` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`point` BIGINT(20) UNSIGNED NULL DEFAULT '0',
	`role` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	PRIMARY KEY (`username`) USING BTREE
)

-- 각 회차
CREATE TABLE `eachep` (
	`epNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`toonNum` BIGINT(20) NOT NULL,
	`eachEpNum` BIGINT(20) NULL DEFAULT '0',
	`epSumImg` VARCHAR(400) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`epTitle` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`epDate` DATE NULL DEFAULT '0000-00-00',
	`epContentImg` VARCHAR(400) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	PRIMARY KEY (`epNum`) USING BTREE,
	INDEX `TN_EE_FK` (`toonNum`) USING BTREE,
	CONSTRAINT `TN_EE_FK` FOREIGN KEY (`toonNum`) REFERENCES `user03`.`toon` (`toonNum`) ON UPDATE RESTRICT ON DELETE CASCADE
)

-- 회원가입 사진 업로드
CREATE TABLE `joinfiles` (
	`fileNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`fileName` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`oriName` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	PRIMARY KEY (`fileNum`) USING BTREE,
	INDEX `JK_UN_FK` (`username`) USING BTREE,
	CONSTRAINT `JK_UN_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

-- 관심웹툰
CREATE TABLE `favoritetoon` (
	`toonNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`likeClick` BIGINT(20) NOT NULL DEFAULT '0',
	PRIMARY KEY (`toonNum`) USING BTREE,
	INDEX `UN_FT_FK` (`username`) USING BTREE,
	CONSTRAINT `TN_FT_FK` FOREIGN KEY (`toonNum`) REFERENCES `user03`.`toon` (`toonNum`) ON UPDATE RESTRICT ON DELETE CASCADE,
	CONSTRAINT `UN_FT_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

-- 회차 별 구매(사용) 목록
CREATE TABLE `pereplist` (
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`toonNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`epNum` BIGINT(20) NOT NULL DEFAULT '0',
	`buyDate` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
	`epPrice` BIGINT(20) NOT NULL DEFAULT '0',
	PRIMARY KEY (`username`) USING BTREE,
	INDEX `TN_PE_FK` (`toonNum`) USING BTREE,
	CONSTRAINT `TN_PE_FK` FOREIGN KEY (`toonNum`) REFERENCES `user03`.`toon` (`toonNum`) ON UPDATE RESTRICT ON DELETE CASCADE,
	CONSTRAINT `UN_PE_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

--주문목록
CREATE TABLE `orderlist` (
	`orderNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`toonNum` BIGINT(20) NOT NULL,
	`usePoint` BIGINT(20) NOT NULL DEFAULT '0',
	`totalCount` BIGINT(20) NOT NULL DEFAULT '0',
	`actualPrice` BIGINT(20) NOT NULL DEFAULT '0',
	PRIMARY KEY (`orderNum`) USING BTREE,
	INDEX `UN_OL_FK` (`username`) USING BTREE,
	INDEX `TN_OL_FK` (`toonNum`) USING BTREE,
	CONSTRAINT `TN_OL_FK` FOREIGN KEY (`toonNum`) REFERENCES `user03`.`toon` (`toonNum`) ON UPDATE RESTRICT ON DELETE CASCADE,
	CONSTRAINT `UN_OL_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

-- 최근 본 작품
CREATE TABLE `recenttoon` (
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`toonNum` BIGINT(20) NULL DEFAULT NULL,
	`epNum` BIGINT(20) NULL DEFAULT NULL,
	`viewDate` DATETIME NULL DEFAULT '0000-00-00 00:00:00',
	PRIMARY KEY (`username`) USING BTREE,
	INDEX `EP_RT_FK` (`epNum`) USING BTREE,
	INDEX `TN_RT_FK` (`toonNum`) USING BTREE,
	CONSTRAINT `EP_RT_FK` FOREIGN KEY (`epNum`) REFERENCES `user03`.`eachep` (`epNum`) ON UPDATE RESTRICT ON DELETE CASCADE,
	CONSTRAINT `TN_RT_FK` FOREIGN KEY (`toonNum`) REFERENCES `user03`.`toon` (`toonNum`) ON UPDATE RESTRICT ON DELETE CASCADE,
	CONSTRAINT `UN_RT_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

--리뷰
CREATE TABLE `review` (
	`revNum` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`epNum` BIGINT(20) NULL DEFAULT NULL,
	`username` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	`rating` BIGINT(20) NULL DEFAULT '10',
	`comment` VARCHAR(200) NULL DEFAULT '' COLLATE 'utf8_general_ci',
	`commentDate` DATE NULL DEFAULT '0000-00-00',
	PRIMARY KEY (`revNum`) USING BTREE,
	INDEX `EN_RV_FK` (`epNum`) USING BTREE,
	INDEX `UN_RV_FK` (`username`) USING BTREE,
	CONSTRAINT `EN_RV_FK` FOREIGN KEY (`epNum`) REFERENCES `user03`.`eachep` (`epNum`) ON UPDATE RESTRICT ON DELETE CASCADE,
	CONSTRAINT `UN_RV_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

--포인트 충전
CREATE TABLE `chargingpoint` (
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`chargePoint` BIGINT(20) NULL DEFAULT '0',
	`chargeDate` DATETIME NULL DEFAULT '0000-00-00 00:00:00',
	PRIMARY KEY (`username`) USING BTREE,
	CONSTRAINT `UN_CP_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

-- 회원 role
CREATE TABLE `memberrole` (
	`username` VARCHAR(200) NOT NULL COLLATE 'utf8_general_ci',
	`id` BIGINT(20) NOT NULL,
	PRIMARY KEY (`username`, `id`) USING BTREE,
	INDEX `adminId` (`id`) USING BTREE,
	CONSTRAINT `ID_RL_FK` FOREIGN KEY (`id`) REFERENCES `user03`.`role` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `UN_RL_FK` FOREIGN KEY (`username`) REFERENCES `user03`.`member` (`username`) ON UPDATE RESTRICT ON DELETE CASCADE
)

-- 직책이름(관리자, 회원,작가)
CREATE TABLE `role` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`roleName` VARCHAR(200) NULL DEFAULT NULL COLLATE 'utf8_general_ci',
	PRIMARY KEY (`id`) USING BTREE
)